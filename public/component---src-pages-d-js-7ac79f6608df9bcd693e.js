(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{kCwQ:function(e,t,n){"use strict";n.r(t);n("a1Th"),n("Btvt"),n("9XZr");var o=n("q1tI"),c=n.n(o),a=n("6QdR"),l=n("Zttt"),r=a.a.firestore();t.default=function(){var e=localStorage.getItem("deviceNumber"),t=localStorage.getItem("owner"),n=Math.floor(999999*Math.random()).toString().padStart(6,"0"),i=e||n,s=!!e&&!!t,u=Object(o.useState)(s),d=u[0],f=u[1],v=Object(o.useState)(!1),m=v[0],p=v[1];return Object(o.useEffect)((function(){d||r.collection("temp-devices").doc(i).set({lastSeen:a.a.firestore.FieldValue.serverTimestamp()}).then((function(){localStorage.setItem("deviceNumber",i),p(!0)}))}),[d]),Object(o.useEffect)((function(){var e=null;return m&&!d&&(e=r.collection("temp-devices").doc(i).onSnapshot((function(e){var t=e.data();t&&t.owner&&r.collection("devices").doc(t.owner).collection("devices").doc(i).set({activated:!0}).then((function(){localStorage.setItem("owner",t.owner),f(!0),r.collection("temp-devices").doc(i).delete().then((function(){}))}))}))),function(){e&&e()}}),[m,d]),Object(o.useEffect)((function(){var n=null;return d&&(n=r.collection("devices").doc(t).collection("devices").doc(e).onSnapshot((function(e){console.log("Snapshot",e.data())}))),function(){n&&n()}})),c.a.createElement(l.a,null,c.a.createElement("h1",null,"Mostrando Display do tablet"),!d&&c.a.createElement("h2",null,i),d&&c.a.createElement("h2",null,"Device Already Activated!"))}}}]);
//# sourceMappingURL=component---src-pages-d-js-7ac79f6608df9bcd693e.js.map