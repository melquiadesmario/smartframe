(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{y9VM:function(e,a,t){"use strict";t.r(a);t("VRzm"),t("Btvt");var r,n=t("o0o1"),l=t.n(n),c=(t("ls82"),t("q1tI")),o=t.n(c),s=t("YwZP"),m=t("Wbzz"),d=t("leoJ"),i=t("Zttt"),u=function(){var e=Object(d.b)();return o.a.createElement("div",null,o.a.createElement("h1",null,"Create Scene"),o.a.createElement("pre",null,JSON.stringify(e)))},p=(t("rGqo"),t("yt8O"),t("RW0V"),t("f3/d"),t("91GP"),t("6QdR")),f=[{value:"red",label:"Red"},{value:"green",label:"Green"},{value:"blue",label:"Blue"}],b=function(e){var a=e.id,t=e.uid,r=e.sceneId,n=Object(c.useState)({color:"green",showMarkers:!1}),l=n[0],s=n[1],m=p.a.firestore(),d=function(e){var a=e.target,t=a.name,r=a.value,n=a.type,l=a.checked,c="checkbox"===n?l:r;s((function(e){var a;return Object.assign({},e,((a={})[t]=c,a))}))};return o.a.createElement("div",{className:"border-solid border-2 border-gray-250 py-8 px-8 mt-2 rounded-lg"},o.a.createElement("h1",{className:"font-bold"},"ChromaKey"),o.a.createElement("div",{className:"inline-block relative w-64 mt-2"},o.a.createElement("select",{className:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",name:"color",value:l.color,onChange:d},f.map((function(e){return o.a.createElement("option",{value:e.value},e.label)})))),o.a.createElement("div",{className:"mt-4"},o.a.createElement("label",{className:"md:w-2/3 block text-gray-500 font-bold"},o.a.createElement("input",{className:"mr-2 leading-tight",type:"checkbox",name:"showMarkers",checked:l.showMarkers,onChange:d}),o.a.createElement("span",{className:"text-sm"},"Show tracking markers"))),o.a.createElement("button",{className:"mt-4 text-lg font-semibold bg-gray-800 text-white rounded-lg px-6 py-2 block shadow-xl hover:text-white hover:bg-black",type:"button",onClick:function(){m.collection("frames").doc(t).collection(r).doc(a).update({settings:l})}},"Save"))},h=function(e){e.id,e.uid,e.sceneId;return o.a.createElement("div",{className:"border-solid border-2 border-gray-250 py-8 px-8 mt-2 rounded-lg"},o.a.createElement("h1",{className:"font-bold"},"Image"))},v={chromakey:{key:"chromakey",label:"CHROMAKEY"},image:{key:"image",label:"IMAGE"}},g=((r={})[v.chromakey.key]=b,r[v.image.key]=h,r),w=function(e){var a=e.sceneId,t=Object(d.b)(),r=Object(c.useState)({}),n=r[0],l=r[1],s=Object(c.useState)([]),m=s[0],i=s[1],u=p.a.firestore();Object(c.useEffect)((function(){t.isAuthReady&&(u.collection("scenes").doc(t.uid).collection("scenes").doc(a).onSnapshot((function(e){l(Object.assign({},e.data(),{id:a}))})),u.collection("frames").doc(t.uid).collection(a).onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object.assign({},e.data(),{id:e.id}))})),i(a)})))}),[u,t]);return o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"text-center font-semibold text-black mb-4"},n.name),o.a.createElement("div",{className:"flex justify-around px-40"},Object.keys(v).map((function(e){return o.a.createElement("div",{className:"bg-gray-300 w-40 h-40 cursor-pointer tracking-wide text-gray-800 font-bold rounded border-b-4 border-gray-500 hover:border-gray-600 hover:bg-gray-500 hover:text-white shadow-md flex flex-col justify-center items-center",key:e,onClick:(r=e,function(){u.collection("frames").doc(t.uid).collection(a).doc().set({type:r})})},o.a.createElement("p",null,"ADD"),o.a.createElement("p",null,v[e].label));var r}))),o.a.createElement("hr",{className:"mt-8 mb-6"}),o.a.createElement("div",null,m.map((function(e){var r=g[e.type];return o.a.createElement("p",null,o.a.createElement(r,{id:e.id,frame:e,uid:t.uid,sceneId:a}))}))))},x=function(e){var a=e.scene;return o.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow-lg mt-5"},o.a.createElement("img",{className:"w-full",src:"https://source.unsplash.com/random/384x234",alt:"Random Image"}),o.a.createElement("div",{className:"px-6 py-4"},o.a.createElement("div",{className:"font-bold text-xl mb-2"},o.a.createElement(m.a,{className:"hover:underline",to:"/app/scene/"+a.id},a.name))))},E=function(){var e=Object(d.b)(),a=Object(c.useState)(""),t=a[0],r=a[1],n=Object(c.useState)([]),l=n[0],s=n[1],m=p.a.firestore();Object(c.useEffect)((function(){e.isAuthReady&&m.collection("scenes").doc(e.uid).collection("scenes").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object.assign({},e.data(),{id:e.id}))})),s(a)}))}),[m,e]);return o.a.createElement("div",{className:"container max-w-full mx-auto md:py-5 px-6"},o.a.createElement("div",{className:"max-w-sm mx-auto px-6"},o.a.createElement("div",{className:"relative flex flex-wrap"},o.a.createElement("div",{className:"w-full relative"},o.a.createElement("div",{className:"md:mt-0"},o.a.createElement("div",{className:"text-center font-semibold text-black"},"Create your Scenes"),o.a.createElement("form",{className:"mt-2"},o.a.createElement("div",{className:"mx-auto max-w-lg "},o.a.createElement("div",{className:"py-1"},o.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Name"),o.a.createElement("input",{className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none",placeholder:"Create New Scene",type:"text",name:"sceneName",value:t,onChange:function(e){r(e.target.value)}})),o.a.createElement("button",{className:"mt-1 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black",type:"button",onClick:function(){m.collection("scenes").doc(e.uid).collection("scenes").doc().set({name:t})}},"Create Scene"))))))),o.a.createElement("div",{className:"font-semibold text-black mt-5"},"List Scenes",o.a.createElement("hr",null)),o.a.createElement("div",{className:"grid grid-cols-3 gap-4"},l.map((function(e){return o.a.createElement(x,{key:e.id,scene:e})}))))};function y(e,a,t,r,n,l,c){try{var o=e[l](c),s=o.value}catch(m){return void t(m)}o.done?a(s):Promise.resolve(s).then(r,n)}var N=function(){var e=Object(d.b)(),a=Object(c.useState)({currentPassword:"",password:"",passwordConfirm:""}),t=a[0],r=a[1],n=Object(c.useState)(""),s=n[0],m=n[1],i=Object(c.useState)(!1),u=i[0],f=i[1],b=function(e){var a=e.target.value,t=e.target.name;r((function(e){var r;return Object.assign({},e,((r={})[t]=a,r))})),m("")},h=function(){var a,r=(a=l.a.mark((function a(){var r,n,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(m(""),!(t.password.length>=6&&t.password===t.passwordConfirm)){a.next=16;break}return a.prev=2,r=p.a.auth().currentUser,n=t.password,c=p.a.auth.EmailAuthProvider.credential(e.email,t.currentPassword),a.next=8,r.reauthenticateWithCredential(c);case 8:return a.next=10,r.updatePassword(n);case 10:f(!0),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(2),m(a.t0.message);case 16:case"end":return a.stop()}}),a,null,[[2,13]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var l=a.apply(e,t);function c(e){y(l,r,n,c,o,"next",e)}function o(e){y(l,r,n,c,o,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}(),v="",g=" rounded-full p-1 fill-current mr-2 ";return t.password===t.passwordConfirm&&t.password.length>=6&&(v+=" text-green-700 ",g+=" bg-green-200 text-green-700 "),(t.password!==t.passwordConfirm||t.password.length<6)&&(v+=" text-red-700 ",g+=" bg-red-200 text-red-700 "),o.a.createElement("div",{className:"container max-w-full mx-auto md:py-5 px-6"},o.a.createElement("div",{className:"max-w-sm mx-auto px-6"},o.a.createElement("div",{className:"relative flex flex-wrap"},o.a.createElement("div",{className:"w-full relative"},o.a.createElement("div",{className:"md:mt-0"},u&&o.a.createElement("div",{className:"container mx-auto mt-5 bg-green-100 border-l-4 border-green-500 text-green-700 p-4",role:"alert"},o.a.createElement("p",{className:"font-bold"},"Password Changed"),o.a.createElement("p",null,"Your password has been successfylly modified.")),!u&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"text-center font-semibold text-black"},"Change Password"),o.a.createElement("form",{className:"mt-2","x-data":"{password: '',password_confirm: ''}"},o.a.createElement("div",{className:"mx-auto max-w-lg "},o.a.createElement("div",{className:"py-1"},o.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Current Password"),o.a.createElement("input",{className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none",placeholder:"",type:"password",name:"currentPassword",value:t.currentPassword,onChange:b})),o.a.createElement("div",{className:"py-1"},o.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Password"),o.a.createElement("input",{className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none",placeholder:"",type:"password","x-model":"password",name:"password",value:t.password,onChange:b})),o.a.createElement("div",{className:"py-1"},o.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Password Confirm"),o.a.createElement("input",{className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none",placeholder:"",type:"password","x-model":"password_confirm",name:"passwordConfirm",value:t.passwordConfirm,onChange:b})),o.a.createElement("div",{className:"flex justify-start mt-3 ml-4 p-1"},o.a.createElement("ul",null,o.a.createElement("li",{className:"flex items-center py-1"},o.a.createElement("div",{className:g},o.a.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t.password===t.passwordConfirm&&o.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}),t.password!==t.passwordConfirm&&o.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}))),o.a.createElement("span",{className:v},t.password===t.passwordConfirm&&t.password.length>=6&&"Passwords match",t.password===t.passwordConfirm&&t.password.length<6&&"Password must be at least 6 characters long",t.password!==t.passwordConfirm&&"Passwords do not match")),s&&o.a.createElement("li",{className:"flex items-center py-1"},o.a.createElement("div",{className:"rounded-full p-1 fill-current bg-red-200 text-red-700 mr-2"},o.a.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}))),o.a.createElement("span",{className:v},s)))),o.a.createElement("button",{className:"mt-1 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black",type:"button",onClick:h},"Change")))))))))};function k(e,a,t,r,n,l,c){try{var o=e[l](c),s=o.value}catch(m){return void t(m)}o.done?a(s):Promise.resolve(s).then(r,n)}var C=function(){var e=Object(d.b)(),a=Object(c.useState)(""),t=a[0],r=a[1],n=Object(c.useState)(""),s=n[0],m=n[1],i=Object(c.useState)([]),u=(i[0],i[1]),f=p.a.firestore();Object(c.useEffect)((function(){e.isAuthReady&&f.collection("scenes").doc(e.uid).collection("scenes").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object.assign({},e.data(),{id:e.id}))})),u(a)}))}),[f,e]);var b=function(){var a,r=(a=l.a.mark((function a(){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=f.collection("temp-devices").doc(t),a.next=3,r.get();case 3:a.sent.data()?(m("Valid"),r.update({owner:e.uid})):m("Invalid");case 6:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var l=a.apply(e,t);function c(e){k(l,r,n,c,o,"next",e)}function o(e){k(l,r,n,c,o,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return o.a.createElement("div",{className:"container max-w-full mx-auto md:py-5 px-6"},o.a.createElement("div",{className:"max-w-sm mx-auto px-6"},o.a.createElement("div",{className:"relative flex flex-wrap"},o.a.createElement("div",{className:"w-full relative"},o.a.createElement("div",{className:"md:mt-0"},o.a.createElement("div",{className:"text-center font-semibold text-black"},"Devices"),o.a.createElement("form",{className:"mt-2"},o.a.createElement("div",{className:"mx-auto max-w-lg "},o.a.createElement("div",{className:"py-1"},o.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Device ID"),o.a.createElement("input",{className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none",placeholder:"Insert your Device ID",type:"text",name:"deviceId",value:t,onChange:function(e){r(e.target.value)}})),o.a.createElement("button",{className:"mt-1 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black",type:"button",onClick:b},"Activate Device"))),"Valid"===s&&o.a.createElement("div",{className:"mt-5 bg-green-100 border-l-4 border-green-500 text-green-700 p-4",role:"alert"},o.a.createElement("p",{className:"font-bold"},"Status ID"),o.a.createElement("p",null,"Device ID ",s,".")),"Invalid"===s&&o.a.createElement("div",{className:"mt-5 bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert"},o.a.createElement("p",{className:"font-bold"},"Status ID"),o.a.createElement("p",null,"Device ID ",s,".")))))))};function j(e,a,t,r,n,l,c){try{var o=e[l](c),s=o.value}catch(m){return void t(m)}o.done?a(s):Promise.resolve(s).then(r,n)}var O=function(){var e=Object(d.b)(),a=Object(c.useState)(!1),t=a[0],r=a[1],n=Object(c.useState)(!1),s=n[0],i=n[1];Object(c.useEffect)((function(){e.isAuthReady&&!e.isAuth&&Object(m.b)("/sign-in")}),[e]);var u=function(){var a,t=(a=l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i(!1),a.next=4,e.resendEmailVerification();case 4:r(!0),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),r(!1),i(!0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var l=a.apply(e,t);function c(e){j(l,r,n,c,o,"next",e)}function o(e){j(l,r,n,c,o,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return e.isAuthReady?e.emailVerified?null:o.a.createElement("div",{className:"container mx-auto mt-5 bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert"},o.a.createElement("p",{className:"font-bold"},"Email Failed (",e.email,")"),o.a.createElement("p",null,"Please, confirm your email address."),!t&&o.a.createElement("button",{className:"bg-transparent hover:bg-orange-500 text-orange-700 font-semibold hover:text-white py-2 px-4 border border-orange-500 hover:border-transparent rounded",onClick:u},"Click here to resend email confirmation."),t&&o.a.createElement("p",null,"Verification e-mail sent. Please, check your inbox and follow the instructions."),s&&o.a.createElement("p",null,"Error, try again in few minutes.")):null};a.default=function(){return o.a.createElement(i.a,{app:!0},o.a.createElement(O,null),o.a.createElement("div",{className:"container mx-auto mt-10"},o.a.createElement(s.Router,{basepath:"/app"},o.a.createElement(u,{path:"/create-scene"}),o.a.createElement(w,{path:"/scene/:sceneId"}),o.a.createElement(E,{path:"/"}),o.a.createElement(N,{path:"/update-password"}),o.a.createElement(C,{path:"/devices"}))))}}}]);
//# sourceMappingURL=component---src-pages-app-js-ffaf22fbbe939bfb75d7.js.map